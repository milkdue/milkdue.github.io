<?xml version="1.0" encoding="utf-8"?>
<search> 
  
  
    
    <entry>
      <title>== vs === vs Object.is()</title>
      <link href="2021/04/10/vs-vs-Object-is/"/>
      <url>2021/04/10/vs-vs-Object-is/</url>
      
        <content type="html"><![CDATA[<h2 id="值对比取决于2个因素"><a href="#值对比取决于2个因素" class="headerlink" title="值对比取决于2个因素"></a>值对比取决于2个因素</h2><ul><li>  所操作的值</li><li>  值的类型，如 String，Boolean…</li></ul><p>在值对比时还有一个起着重要的作用的机制，那就是值的类型转换。</p><h2 id="什么是类型转换？"><a href="#什么是类型转换？" class="headerlink" title="什么是类型转换？"></a>什么是类型转换？</h2><p>&emsp;&emsp;JavaScript 作为一个弱类型语言，有时候值会从一个类型转换成其他类型，这个称之为隐式转换或强制转换，这些在我们使用运算符（<code>==</code>）时会导致一些错误发生。</p><h2 id="比较运算符的种类"><a href="#比较运算符的种类" class="headerlink" title="比较运算符的种类"></a>比较运算符的种类</h2><p>JavaScript 提供了3种比较运算符：</p><ul><li>  <code>==</code></li><li>  <code>===</code></li><li>  <code>Object.is()</code></li></ul><h3 id="（非严格相等）"><a href="#（非严格相等）" class="headerlink" title="==（非严格相等）"></a><code>==</code>（非严格相等）</h3><ul><li>其被称为<strong>相等操作符</strong>，只会对比两个值是否相等，相等则会返回 true</li><li>在这种情况下，如果对比的值类型不同，则会自动将值隐式转换成一种常见的类型</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> == <span class="string">&#x27;1&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> == <span class="string">&#x27;true&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> == <span class="string">&#x27;NaN&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> == <span class="literal">NaN</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">0</span> == <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="number">0</span> == <span class="string">&#x27;0&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> == <span class="string">&#x27;1&#x27;</span>) <span class="comment">// true 将 true转为1 &#x27;1&#x27;转为1</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125; == &#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">undefined</span> == <span class="literal">true</span>); <span class="comment">// false Number(undefined)是NaN</span></span><br><span class="line"><span class="built_in">console</span>.log(undefinde == <span class="literal">false</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> == <span class="literal">true</span>); <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> == <span class="literal">false</span>); <span class="comment">// false typeof null是&#x27;object&#x27; 但是null没有 toString和valueOf方法 这是一个特殊的</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> a = &#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;</span><br><span class="line"><span class="keyword">const</span> b = a</span><br><span class="line"><span class="built_in">console</span>.log(a == b) <span class="comment">// true</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log([] == <span class="number">0</span>); <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;&#125; == <span class="number">0</span>); <span class="comment">// false &#123;&#125;.toString()是一个默认的字符串 [Object Object] NaN不和任何值相等</span></span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(&#123;<span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">1</span>&#125;, <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">0</span>&#125;&#125; == <span class="number">1</span>);</span><br><span class="line"><span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123;<span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> []&#125;, <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> <span class="number">100</span>&#125;&#125; == <span class="number">100</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>==</code>总结</strong></p><ul><li><code>NaN</code> 不和任何值相等，包括它自己</li><li>-0 与 0 相等</li><li><code>null</code> == <code>null</code> 和 <code>undefined</code>相等</li><li>布尔类型和字符串 == 比较时将它们转为number类型再进行 == 比较，并且对于其他不同基本数据类型的 == 比较都是将基本数据类型转为number类型进行比较，但是null和基本数据类型的比较作对象处理</li><li>操作只可以自动转换为 String、Boolean、Number</li><li>String 类型比较区分大小写</li><li>两个操作值如果引用同一个对象，返回 true，否则 false</li><li>对于如果两个操作数中其中一个是复杂数据类型，那么会先获取对象的原始值进行比较，复杂数据类型的原始值的获取是调用valueOf，如果是基本数据类型就进行比较，如果不是就再调用toString方法，然后进行基本数据类型的比较。例如：<code>[] == 0</code>这个表达式的值是true，[].valueOf()转化为一个[]，再调用toString()转换为空串，在转为Number数据类型，所以返回true</li><li>记住 6 个虚值（null，undefined，’’，0，NaN，false）</li></ul><h3 id="（严格相等）"><a href="#（严格相等）" class="headerlink" title="=== （严格相等）"></a><code>===</code> （严格相等）</h3><ul><li>  它被称为 <strong>全等操作符</strong>，和 <code>==</code> 很相似，区别在于 <code>===</code> 不执行隐式转换</li><li>  当两个操作值的值和类型都相等的情况下，才会返回 true</li></ul><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(<span class="number">1</span> === <span class="string">&#x27;1&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> === <span class="string">&#x27;true&#x27;</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">true</span> === <span class="literal">true</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">NaN</span> === <span class="literal">NaN</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> === <span class="literal">null</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">&#x27;ara&#x27;</span> == <span class="string">&#x27;Ara&#x27;</span>) <span class="comment">//false</span></span><br><span class="line"><span class="built_in">console</span>.log(-<span class="number">0</span> === <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">console</span>.log(<span class="literal">null</span> === <span class="literal">undefined</span>) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">console</span>.log(&#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125; === &#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><p><strong>使用<code>===</code>总结</strong></p><ul><li>  <code>NaN</code> 不等于包含它在内的任何东西</li><li>  -0 等于 0</li><li>  null 等于 null，但不等于 undefined</li><li>  String 严格区分大小写</li><li>  两个操作值如果引用同一个对象，返回 true，否则 false</li></ul><h3 id="Object-is"><a href="#Object-is" class="headerlink" title="Object.is()"></a>Object.is()</h3><ul><li>  其被称为 <strong>同值相等</strong>，是比较运算符中的一份子</li><li>  在检查两个操作值是否相等时，用到了以下规则</li></ul><h4 id="规则1：操作值均未被定义（undefined）"><a href="#规则1：操作值均未被定义（undefined）" class="headerlink" title="规则1：操作值均未被定义（undefined）"></a>规则1：操作值均未被定义（<code>undefined</code>）</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a</span><br><span class="line"><span class="keyword">let</span> b</span><br><span class="line"><span class="built_in">Object</span>.is(a, b) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="规则2：操作都是相同长度和顺序的字符串"><a href="#规则2：操作都是相同长度和顺序的字符串" class="headerlink" title="规则2：操作都是相同长度和顺序的字符串"></a>规则2：操作都是相同长度和顺序的字符串</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="string">&#x27;abcdefg&#x27;</span>, <span class="string">&#x27;abcdefg&#x27;</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="string">&#x27;abcdefg&#x27;</span>, <span class="string">&#x27;ABCDEFG&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="规则3：操作值都是-null"><a href="#规则3：操作值都是-null" class="headerlink" title="规则3：操作值都是 null"></a>规则3：操作值都是 null</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="literal">null</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">null</span>, <span class="string">&#x27;null&#x27;</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="规则4：操作值为对象且引用地址相同"><a href="#规则4：操作值为对象且引用地址相同" class="headerlink" title="规则4：操作值为对象且引用地址相同"></a>规则4：操作值为对象且引用地址相同</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> a = &#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;</span><br><span class="line"><span class="keyword">let</span> b = a</span><br><span class="line"></span><br><span class="line"><span class="built_in">Object</span>.is(a, b) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(&#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;, &#123; <span class="attr">name</span>: <span class="string">&quot;Tom&quot;</span> &#125;) <span class="comment">// false</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="built_in">window</span>, <span class="built_in">window</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h4 id="规则5：操作值均非0和非NaN"><a href="#规则5：操作值均非0和非NaN" class="headerlink" title="规则5：操作值均非0和非NaN"></a>规则5：操作值均非0和非NaN</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">1</span>, <span class="number">1</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">1</span>, <span class="number">2</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="规则6：操作值都是-0-或-0"><a href="#规则6：操作值都是-0-或-0" class="headerlink" title="规则6：操作值都是 +0 或 -0"></a>规则6：操作值都是 +0 或 -0</h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, <span class="number">0</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="number">0</span>, -<span class="number">0</span>) <span class="comment">// false</span></span><br></pre></td></tr></table></figure><h4 id="规则7：操作值为-NaN"><a href="#规则7：操作值为-NaN" class="headerlink" title="规则7：操作值为 NaN"></a>规则7：操作值为 <code>NaN</code></h4><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="literal">NaN</span>) <span class="comment">// true</span></span><br><span class="line"><span class="built_in">Object</span>.is(<span class="literal">NaN</span>, <span class="number">0</span>/<span class="number">0</span>) <span class="comment">// true</span></span><br></pre></td></tr></table></figure><h2 id="polyfill"><a href="#polyfill" class="headerlink" title="polyfill"></a>polyfill</h2><blockquote><p>  Object.is() 不支持 IE，因此使用 polyfill 代替</p></blockquote><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">if</span>(!<span class="built_in">Object</span>.is) &#123;</span><br><span class="line">  <span class="built_in">Object</span>.is = <span class="function"><span class="keyword">function</span>(<span class="params">a, b</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">if</span>(a === b) &#123;</span><br><span class="line"><span class="comment">// Object.is(0, -0); false 考虑是0的情况Infinity !== -Infinity</span></span><br><span class="line">      <span class="keyword">return</span> a !== <span class="number">0</span> || <span class="number">1</span>/a === <span class="number">1</span>/b</span><br><span class="line">    &#125; <span class="keyword">else</span>&#123;</span><br><span class="line"><span class="comment">// 考虑两个值是NaN的情况</span></span><br><span class="line">      <span class="keyword">return</span> a !== a &amp;&amp; b !== b</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><h2 id="练习"><a href="#练习" class="headerlink" title="练习"></a>练习</h2><p>console.log(null == false) <span class="hide-inline"><button type="button" class="hide-button button--animated" style="background-color: #FF7242;color: #fff">查看答案  </button><span class="hide-content">false</span></span><br>console.log(null == true) <span class="hide-inline"><button type="button" class="hide-button button--animated" style="">Click  </button><span class="hide-content">false</span></span></p><div class="hide-toggle" ><div class="hide-button toggle-title" style=""><i class="fas fa-caret-right fa-fw"></i><span>小练习</span></div>    <div class="hide-content"><figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">console</span>.log(&#123;<span class="function"><span class="title">valueOf</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> &#123;&#125;&#125;, <span class="function"><span class="title">toString</span>(<span class="params"></span>)</span>&#123;<span class="keyword">return</span> -<span class="number">1</span>&#125;&#125; == -<span class="number">1</span>); <span class="comment">// true</span></span><br></pre></td></tr></table></figure></div></div><div class="hide-block"><button type="button" class="hide-button button--animated" style="">查看答案    </button><div class="hide-content"><p>傻子，怎麼可能有答案</p></div></div><div class="tabs" id="test1"><ul class="nav-tabs"><li class="tab active"><button type="button" data-href="#test1-1">我的世界</button></li><li class="tab"><button type="button" data-href="#test1-2">我的代码</button></li><li class="tab"><button type="button" data-href="#test1-3">我的什么</button></li></ul><div class="tab-contents"><div class="tab-item-content active" id="test1-1"><p><strong>This is Tab 1.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-2"><p><strong>This is Tab 2.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div><div class="tab-item-content" id="test1-3"><p><strong>This is Tab 3.</strong></p><button type="button" class="tab-to-top" aria-label="scroll to top"><i class="fas fa-arrow-up"></i></button></div></div></div>]]></content>
      
      
      <categories>
          
          <category> javascript </category>
          
      </categories>
      
      
        <tags>
            
            <tag> javascript </tag>
            
        </tags>
      
    </entry>
    
    
  
  
</search>
